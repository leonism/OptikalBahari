{% if page.is_post %}
  {% assign type = 'article' %}
{% else %}
  {% assign type = 'website' %}
{% endif %}

<meta property="og:type" content="{{ type }}" />
<meta
  property="og:url"
  content="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}"
/>
<meta
  property="og:title"
  content="{% if page.title %}{{ page.title | escape }}{% else %}{{ site.title | escape }}{% endif %}"
/>
<meta
  property="og:description"
  content="{% if page.excerpt %}{{ page.excerpt | strip_html | strip_newlines | truncate: 140 }}{% else %}{{ site.description }}{% endif %}"
/>

{%- comment -%} Determine the best image source {%- endcomment -%}
{% assign seo_image = page.image.path | default: page.background %}

{% if seo_image %}
  {%- comment -%}
    Pass the image through your Cloudinary filter.
    We force f_jpg to ensure social crawlers see a file extension.
  {%- endcomment -%}
  {% assign final_og_image = seo_image | cloudinary_url: 'q_auto,f_jpg,w_1200,h_630,c_fill' | append: ".jpg" %}

  <meta property="og:image" content="{{ final_og_image }}" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
{% endif %}

<meta property="og:site_name" content="{{ site.title }}" />
{% assign logo_path = "assets/img/logo.webp" %}
<meta property="og:logo" content="{{ logo_path | cloudinary_url: 'q_auto,f_png' | append: '.png' }}" />
